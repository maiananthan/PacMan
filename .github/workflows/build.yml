name: executable creation

on: [push]

jobs:
  windows:
    - name: checkout code from repo
      uses: actions/checkout@v1
    - name: set-up python3.8
      uses: actions/setup-python@v2
      with:
        python-version: 3.8
    - name: install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    - name: build with pyinstaller for windows
      runs: |
        ./setup.ps1
        pyinstaller --onefile .\PacMan.py .\commands\__init__.py .\commands\add.py .\commands\color.py .\commands\config.py .\commands\create.py .\commands\display.py .\commands\remove.py .\commands\update.py .\commands\upgrade.py
        Get-ChildItem -Recurse dist
    - name:  upload release assets
      uses: actions/upload-release-asset@v1
      with: 
        name: PacMan-win64
        path: dist/PacMan.exe